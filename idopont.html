<!DOCTYPE html>
<html lang="hu">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Exo+2&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="idopontok.css">
    <title>Időpontok</title>
</head>

<body>
    <div class="container-lg">
        <div class="header-container">
            <a href="index.html" class="button button-secondary">Vissza</a>
            <h1>KÉPZÉSEK</h1>
        </div>
        <div class="row gy-4">
            <div class="col-12 col-sm-6 col-md-3">
                <div class="workshop-card">
                    <img src="assets/carousel/img2.jpg" alt="">
                    <h2>Gyereknapi csokoládé készítő tanfolyam</h2>
                    <p>Egyszerű és gyors kézműves csokoládé gyermeked keze által :-)</p>
                    <p class="price">16 900 Ft</p>
                    <button class="button button-secondary"
                        onclick="startCoursePayment('gyereknapi', 'Gyereknapi csokoládé készítő tanfolyam', 16900)">
                        Időpontfoglalás
                    </button>
                </div>
            </div>
            <div class="col-12 col-sm-6 col-md-3">
                <div class="workshop-card">
                    <img src="assets/carousel/img1.png" alt="">
                    <h2>Kakaóbabtól a táblás csokiig 1.</h2>
                    <p>Készítsd el SAJÁT, EGYEDI Csokoládédat! Pörkölj, konsolj, temperálj és vidd haza a SAJÁT
                        CSOKIdat!</p>
                    <p class="price">185 900 Ft</p>
                    <a href="https://cal.com/dobreia/csokikurzus-alap"
                        class="button button-secondary">Időpontfoglalás</a>
                </div>
            </div>
            <div class="col-12 col-sm-6 col-md-3">
                <div class="workshop-card">
                    <img src="assets/carousel/img3.jpg" alt="">
                    <h2>Kakaóbabtól a táblás csokiig 2.</h2>
                    <p>Készítsd el SAJÁT, EGYEDI ÉTCSOKOLÁDÉdat! Pörkölj, konsolj, temperálj és vidd haza a SAJÁT
                        CSOKIdat!</p>
                    <p class="price">185 900 Ft</p>
                    <a href="https://cal.com/dobreia/csokikurzus-halado"
                        class="button button-secondary">Időpontfoglalás</a>
                </div>
            </div>
            <div class="col-12 col-sm-6 col-md-3">
                <div class="workshop-card">
                    <img src="assets/carousel/img4.jpg" alt="">
                    <h2>Muffin vagy Cupcake?</h2>
                    <p>Gyere és Süssünk sütit egy Általad választott időpontban!</p>
                    <p class="price">27 900 Ft</p>
                    <a href="https://cal.com/dobreia/muffin-cupcake" class="button button-secondary">Időpontfoglalás</a>
                </div>
            </div>
            <div class="col-12 col-sm-6 col-md-3">
                <div class="workshop-card">
                    <img src="assets/carousel/img5.jpg" alt="">
                    <h2>Készítsd el első saját csokoládédat!</h2>
                    <p>Kézműves Csokoládékészítés 1x1 Az általad választott időpontban!</p>
                    <p class="price">39 900 Ft</p>
                    <a href="https://cal.com/dobreia/elso-csoki" class="button button-secondary">Időpontfoglalás</a>
                </div>
            </div>
            <div class="col-12 col-sm-6 col-md-3">
                <div class="workshop-card">
                    <img src="assets/carousel/img6.png" alt="">
                    <h2>Torta, ahogy TE szereted!</h2>
                    <p>Süssük meg a kedvenc tortádat egy általad választott időpontban!</p>
                    <p class="price">42 900 Ft</p>
                    <a href="https://cal.com/dobreia/sajat-torta" class="button button-secondary">Időpontfoglalás</a>
                </div>
            </div>
        </div>
    </div>

</body>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq"
    crossorigin="anonymous"></script>
<script>
    async function startCoursePayment(courseId, courseName, price) {
        const POSKey = "d85be135-f5bc-4c84-a8fe-fc3bc55012bb";
        const MerchantId = "dobreiandras@gmail.com";

        const paymentRequest = {
            POSKey,
            PaymentType: "Immediate",
            GuestCheckOut: true,
            FundingSources: ["All"],
            PaymentRequestId: "course-" + courseId + "-" + Date.now(),
            OrderNumber: "COURSE-" + Date.now(),
            Currency: "HUF",
            RedirectUrl: "https://dobreia.github.io/chocoleaf/redirect.html?course=" + courseId,
            Transactions: [{
                POSTransactionId: "T" + Date.now(),
                Payee: MerchantId,
                Total: price,
                Comment: courseName,
                Items: [{
                    Name: courseName,
                    Description: "1 fő részvétel",
                    Quantity: 1,
                    Unit: "db",
                    UnitPrice: price,
                    ItemTotal: price
                }]
            }]
        };

        try {
            const response = await fetch("https://api.test.barion.com/v2/Payment/Start", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(paymentRequest)
            });
            const data = await response.json();
            if (data.GatewayUrl) {
                window.location.href = data.GatewayUrl;
            } else {
                alert("Hiba: " + (data.Errors?.[0]?.Title || "Ismeretlen hiba"));
            }
        } catch (err) {
            alert("Nem sikerült kapcsolódni a Barionhoz.");
            console.error(err);
        }
    }
</script>


</html>